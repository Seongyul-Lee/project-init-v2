입력: $ARGUMENTS
형식: NNN-아이디어명 프로젝트명
예시: /init-docs 001-데일리셀프 dailyself-app

---

## 목적
채택된 PRD의 핵심 섹션을 읽어, 새 프로젝트에 CLAUDE.md와 KNOWLEDGE.md를 생성하고 Git을 초기화한다.

---

## 실행 절차

### 1단계: 인자 파싱
- `$ARGUMENTS`에서 두 인자를 분리한다.
  - 첫 번째: `NNN-아이디어명` (예: `001-데일리셀프`)
  - 두 번째: `프로젝트명` (예: `dailyself-app`)
- 프로젝트 경로: `C:\Users\lsy\[프로젝트명]`
- 프로젝트 디렉토리가 존재하는지, `package.json`이 있는지 확인한다.
  - 없으면 `/init-scaffold`를 먼저 실행하라고 안내하고 중단.
- 인자가 2개가 아니면 사용 예시를 보여주고 중단한다.

### 2단계: PRD 읽기 (선별 섹션)
- PRD 파일을 찾는다:
  - 경로: `C:\Users\lsy\app-idia-lab\ideas\adopted\`
  - 파일명 패턴: `NNN-*-prd.md` (예: `001-데일리셀프-prd.md`)
  - 해당 패턴의 파일이 없으면 사용자에게 정확한 파일명을 확인하고 중단한다.
- **아래 섹션만 순서대로 읽는다.** PRD 전체를 읽지 않는다.

| 순서 | PRD 섹션 | CLAUDE.md 용도 | KNOWLEDGE.md 용도 |
|---|---|---|---|
| 1 | Section 1 (Executive Summary) | 프로젝트 개요 | 비즈니스 컨텍스트 |
| 2 | Section 2 (Problem Statement) | — | 비즈니스 컨텍스트 |
| 3 | Section 3 (Target Users & Personas) | — | 타겟 사용자 |
| 4 | Section 5 (Functional Requirements) | 프로젝트 구조 확장 참고 | 핵심 기능 요약 |
| 5 | Section 7 전체 (Technical Architecture) | 기술 스택, DB 규칙, API 규칙, 오프라인/동기화, 상태 관리 | — |
| 6 | Section 8 (Screen Map & UI Specs) | 프로젝트 구조 참고 | — |
| 7 | Section 9 (Competitive Differentiation) | — | 경쟁 포지셔닝 |
| 8 | Section 10 (Monetization Strategy) | — | 수익 모델 |
| 9 | Section 12 (Assumptions & Constraints) | 제약사항 | — |
| 10 | Section 15 (Success Metrics) | — | 성공 지표 |

- 각 섹션은 `##` 헤딩 기준으로 구분한다. 해당 헤딩부터 다음 동급 헤딩 직전까지를 읽는다.
- PRD에 해당 섹션이 없으면 기록해두고, 생성할 문서에서 해당 항목에 `[PRD에 미포함 — 수동 작성 필요]`로 표시한다.

### 3단계: CLAUDE.md 생성
- 파일 경로: `C:\Users\lsy\[프로젝트명]\CLAUDE.md`
- **project-init CLAUDE.md의 "생성할 CLAUDE.md 골격" 섹션을 구조 템플릿으로 사용한다.**
- PRD 내용을 그대로 복사하지 않는다. 개발 시 Claude가 참조할 지침으로 재구성한다.

#### 섹션별 작성 지침

**프로젝트 개요**
- PRD Section 1에서 추출.
- 한 문단으로 프로젝트의 핵심 가치와 목표를 서술한다.
- 불필요한 마케팅 문구를 제거하고, 기술적 목표에 집중한다.

**기술 스택**
- PRD Section 7-1에서 추출.
- 레이어별 기술 선택과 선택 근거를 정리한다.
- 형식: 레이어명 — 기술명 (선택 근거)

**프로젝트 구조**
- project-init CLAUDE.md의 "표준 폴더 구조" 기반.
- PRD Section 5 (P0 기능)와 Section 8 (화면 구조)에서 기능별 폴더를 도출하여 확장한다.
- init-scaffold에서 실제 생성한 폴더 트리와 일치시킨다.

**코딩 컨벤션 > 네이밍 규칙**
- 골격 템플릿의 고정 규칙을 그대로 사용한다.

**코딩 컨벤션 > 컴포넌트 패턴**
- 골격 템플릿의 고정 규칙을 그대로 사용한다.

**코딩 컨벤션 > 상태 관리 패턴**
- PRD Section 7-7에서 추출.
- Zustand 스토어 목록을 나열하고, 각 스토어의 역할과 주요 상태 필드를 기술한다.

**코딩 컨벤션 > 에러 핸들링**
- 골격 템플릿의 고정 규칙을 그대로 사용한다.

**DB 규칙**
- PRD Section 7-5에서 추출.
- 테이블 목록, 네이밍 규칙(snake_case, 복수형), RLS 정책 요약, 핵심 DB 함수 목록과 역할.
- CREATE TABLE SQL 전체를 복사하지 않는다. 테이블 목록과 핵심 관계만 정리한다.

**API 규칙**
- PRD Section 7-6에서 추출.
- REST vs Edge Function 구분 기준, 엔드포인트 목록과 역할.
- TypeScript 인터페이스 패턴 (어떤 네이밍 규칙으로 Request/Response 타입을 정의하는지).
- 엔드포인트 전체 명세를 복사하지 않는다. 패턴과 규칙 위주로 정리한다.

**오프라인/동기화 규칙**
- PRD Section 7-3에서 추출.
- 로컬 저장소 선택과 역할 분담 (예: MMKV는 사용자 설정, op-sqlite는 캐시).
- 동기화 큐 로직: 재시도 횟수, 백오프 전략, 큐 데이터 구조.
- 충돌 해결 정책 (예: Server Wins).

**주요 명령어**
- 골격 템플릿의 고정 명령어를 그대로 사용한다.

**제약사항**
- PRD Section 12에서 추출.
- 비즈니스 가정, 외부 서비스 의존성, 기술적 제약을 요약한다.

### 4단계: KNOWLEDGE.md 생성
- 파일 경로: `C:\Users\lsy\[프로젝트명]\KNOWLEDGE.md`
- **project-init CLAUDE.md의 "생성할 KNOWLEDGE.md 골격" 섹션을 구조 템플릿으로 사용한다.**
- 비즈니스 맥락과 사용자 관점 위주로 작성한다. 기술 구현 세부사항은 CLAUDE.md에 있으므로 중복하지 않는다.

#### 섹션별 작성 지침

**비즈니스 컨텍스트**
- PRD Section 1, 2에서 추출.
- 이 앱이 해결하는 문제, 시장 배경(간략), 핵심 가치 제안.

**타겟 사용자**
- PRD Section 3에서 추출.
- 사용자 세그먼트별 핵심 특성, 니즈, 행동 패턴.
- 전체 페르소나를 복사하지 않는다. 세그먼트별 2~3줄로 요약한다.

**핵심 기능 요약**
- PRD Section 5에서 추출.
- P0/P1 기능만 포함한다. 기능 ID, 기능명, 한 줄 설명.
- AC(수용 기준) 번호를 참조로 기록한다 (예: "AC-01-1 ~ AC-01-3 참조").

**핵심 용어 사전**
- PRD 전반에서 도메인 특화 용어를 추출한다.
- 형식: `용어` — 정의
- 예: `체크인` — 사용자가 일일 루틴 수행을 기록하는 행위

**수익 모델**
- PRD Section 10에서 추출.
- 무료 범위, 유료 전환 구조, 가격 정책 요약.

**경쟁 포지셔닝**
- PRD Section 9에서 추출.
- 주요 경쟁 앱 2~3개와 각각에 대한 차별점 한 줄.

**성공 지표**
- PRD Section 15에서 추출.
- MVP 단계 핵심 KPI 3~5개와 목표 수치.

### 5단계: Git 초기화
- 프로젝트 디렉토리에서 실행한다: `C:\Users\lsy\[프로젝트명]`
- Git이 이미 초기화되어 있지 않은 경우에만 `git init`을 실행한다.
- 전체 파일을 스테이징하고 초기 커밋한다:
  ```
  git add -A
  git commit -m "프로젝트 초기화: Expo + TypeScript + Supabase 기본 구조"
  ```

### 6단계: 완료 보고
아래 내용을 사용자에게 보고한다:

```
✅ 프로젝트 문서 생성 완료

📄 CLAUDE.md 섹션:
   - 프로젝트 개요
   - 기술 스택
   - 프로젝트 구조
   - 코딩 컨벤션 (네이밍/컴포넌트/상태관리/에러)
   - DB 규칙
   - API 규칙
   - 오프라인/동기화 규칙
   - 주요 명령어
   - 제약사항

📄 KNOWLEDGE.md 섹션:
   - 비즈니스 컨텍스트
   - 타겟 사용자
   - 핵심 기능 요약
   - 핵심 용어 사전
   - 수익 모델
   - 경쟁 포지셔닝
   - 성공 지표

🔀 Git 초기 커밋 완료

👉 다음 단계: Task Master로 PRD 파싱하여 태스크 분해
```

---

## 작성 원칙
1. **PRD 내용을 그대로 복사하지 않는다.** 개발 지침/도메인 지식에 맞게 재구성한다.
2. **CLAUDE.md는 "개발 시 Claude가 참조할 지침서"**이므로, 명확한 규칙과 패턴 위주로 작성한다.
3. **KNOWLEDGE.md는 "프로젝트 도메인 이해를 위한 참고서"**이므로, 비즈니스 맥락과 사용자 관점 위주로 작성한다.
4. **CLAUDE.md와 KNOWLEDGE.md 간 내용을 중복하지 않는다.** 기술 → CLAUDE.md, 비즈니스 → KNOWLEDGE.md.
5. **간결하게 작성한다.** 각 섹션이 핵심만 담도록 한다. 상세 내용은 PRD 원문을 참조하면 된다.

---

## 오류 처리
| 상황 | 처리 |
|---|---|
| 인자 부족/초과 | 사용 예시 안내 후 중단 |
| 프로젝트 디렉토리 미존재 | `/init-scaffold`를 먼저 실행하라고 안내 |
| PRD 파일 미발견 | 정확한 파일명을 사용자에게 확인 요청 |
| PRD 특정 섹션 누락 | 해당 항목에 `[PRD에 미포함 — 수동 작성 필요]` 표시 후 계속 |
